# REDIS
![image](https://user-images.githubusercontent.com/3950155/223433503-34e542c3-b119-4dcc-8be2-41c276e14032.png)


## TYPES
*  **STRINGS**  - –°—Ç—Ä–æ–∫–∏ Redis ‚Äî —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö Redis, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–æ–±–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–π—Ç–æ–≤.    
*  **LISTS**    -  –°–ø–∏—Å–∫–∏ Redis ‚Äî —ç—Ç–æ —Å–ø–∏—Å–∫–∏ —Å—Ç—Ä–æ–∫, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –ø–æ—Ä—è–¥–∫—É –≤—Å—Ç–∞–≤–∫–∏.              
*  **SETS**     - –ù–∞–±–æ—Ä—ã Redis ‚Äî —ç—Ç–æ –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤—É—é—Ç –∫–∞–∫ –Ω–∞–±–æ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ –ª—é–±–∏–º–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.   
*  **HASHES**   - –•—ç—à–∏ Redis ‚Äî —ç—Ç–æ —Ç–∏–ø—ã –∑–∞–ø–∏—Å–µ–π, —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–∫ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–∞—Ä –ø–æ–ª–µ-–∑–Ω–∞—á–µ–Ω–∏–µ.     
*  **SORT SET** - –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã Redis ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –ø–æ—Ä—è–¥–æ–∫ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ—Ü–µ–Ω–∫–æ–π, —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–æ–π.   
*  **STRREAMS** - –ü–æ—Ç–æ–∫ Redis ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –∂—É—Ä–Ω–∞–ª —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è. –ü–æ—Ç–æ–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è, –∞ –∑–∞—Ç–µ–º –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –∏—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏   
*  **GEOSPATIAL** - –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã Redis –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–π –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–¥–∏—É—Å–∞ –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–µ–π —Ä–∞–º–∫–∏.    
*  **BITMAPS**  - –†–∞—Å—Ç—Ä–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è Redis –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ —Å—Ç—Ä–æ–∫–æ–π.     
*  **BITFIELDS** - –ë–∏—Ç–æ–≤—ã–µ –ø–æ–ª—è Redis —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∫–æ–¥–∏—Ä—É—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ —Å—Ç—Ä–æ–∫–æ–≤–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏.    
*  **HYPERLOG** - –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö Redis HyperLogLog –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (—Ç. –µ. –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤) –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤.   


## üõ† INIT
```go
package main

import (
	"encoding/json"
	"fmt"
	"time"
	"github.com/go-redis/redis"
 )

// –°–µ—Å—Å–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
var client *redis.Client

// **************************************************
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Redis
// **************************************************
func init() {

	client = redis.NewClient(&redis.Options{
		Addr:         ":6379",
		DialTimeout:  10 * time.Second,
		ReadTimeout:  30 * time.Second,
		WriteTimeout: 30 * time.Second,
		PoolSize:     10,
		PoolTimeout:  30 * time.Second,
		DB:           2,
	})

	// Clear all data
	//client.FlushDB()
}

type Mst map[string]interface{}

type Corp struct {
	Title string `json:"title"`
	Name  string `json:"name"`
	Form  string `json:"form"`
}

func main() {
	Iterrator()
}
```


## üìë MSET
```go
unc SettMain() {
	fmt.Println("CLIENT ID", client.ClientID())
	fmt.Println("CLIENT ID", client.DBSize())

	ol := `{
         Id:"Key-001",
         Name:"Roman",
         Description:"Samples records"
    }
    `
	// –ó–∞–ø–∏—Å—å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
	client.MSet("one", "1-3663", "two", "2", "three", "3", "four", "4", "Pole:12", "12", "Pole:14", "14", "Pole:15", "15")

	// –ó–∞–ø–∏—Å—å –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
	err := client.Set("Keys:15", "key15 –∑–Ω–∞—á–µ–Ω–∏–µ", 0).Err()
	if err != nil {
		panic(err)
	}

	// –ß—Ç–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
	val, _ := client.Get("Keys:15").Result()
	fmt.Println("15 –µ–ª–µ–º–µ–Ω—Ç ", val)

	// –ó–∞–ø–∏—Å—å –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
	client.Set("Structure", ol, 0)

	// –≤—ã–±–æ—Ä –ø–æ —Ñ–∏–ª—å—Ç—Ä—É
	keys := client.Keys("*o*")
	fmt.Println("–í—ã–±–æ—Ä –ø–æ —Ñ–∏–ª—å—Ç—Ä—É", keys)

	// –≤—ã–±–æ—Ä –ø–æ —Ñ–∏–ª—å—Ç—Ä—É
	// on - –Ω–∞—á–∞–ª–æ –ø–æ–∏—Å–∫–∞
	// ? - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞
	keys = client.Keys("on?")
	fmt.Println("–≤—ã–±–æ—Ä –ø–æ —Ñ–∏–ª—å—Ç—Ä—É ", keys)

	// –í—Å–µ –∑–∞–ø–∏—Å–∏
	keys = client.Keys("*")
	fmt.Println("–í—Å–µ –∑–∞–ø–∏—Å–∏ ", keys)

	// –í—Å–µ –∑–∞–ø–∏—Å–∏
	keys = client.Keys("Pole:*")
	fmt.Println("–í—Å–µ –ø–æ–ª—è Pole", keys)

	// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –¥–ª—è –æ–ø—Ä–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞
	client.Expire("Pole:14", 25*time.Second)

	ttl := client.TTL("Pole:14")
	fmt.Println("–û–ø—Ä–µ–¥–ª—è–µ–º –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ", ttl)

	// –ò–º–µ–µ—Ç –ª–∏ –∫–ª—é—á –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ
	persist := client.Persist("Pole:12")
	fmt.Println("Persist : ", persist)

	expireAt := client.ExpireAt("key", time.Now().Add(-time.Hour))
	fmt.Println("Response : ", expireAt.Val())

	// –ø–µ—Ä–µ–Ω–æ—Å –∫–ª—é—á–∞ –≤ –±–∞–∑—É 1
	move := client.Move("Pole:15", 1)
	fmt.Println("Move :", move)

	// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
	expiration := 90 * time.Second
	client.Set("Status", "–ï—É—ã–µ", expiration)

	// –£–¥–∞–ª–µ–Ω–∏–µ
	// Deleting()
}
```


## üìí SET FOR

```go

// *************************************
// –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–ø–∏—Å–µ–π
// *************************************
func AllOpertaion() {

	// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
	client.Set("key2", "First element", 0)
	client.Set("key3", "New element", 0)
	client.Set("key2:456", "Example simple for insert", 0)

	err := client.Set("key", "value", 0).Err()
	if err != nil {
		panic(err)
	}

	val, err := client.Get("key").Result()
	if err != nil {
		panic(err)
	}
	fmt.Println("key", val)

	val2, err := client.Get("key2").Result()

	if err == redis.Nil {
		fmt.Println("key2 does not exist")
	} else if err != nil {
		panic(err)
	} else {
		fmt.Println("key2", val2)
	}
}
```


## üìÑ HSET
![image](https://user-images.githubusercontent.com/3950155/223431990-226e6c8c-ee84-4c81-876f-7cf14d28a57e.png)

```go
// Main
func HMSET() {

	//fmt.Println(client.ClientList())

	// –ó–∞–ø–∏—Å—å —Å–ø–∏—Å–∫–æ–º
	dat := Mst{}
	dat["a1"] = "–§–∞–º–∏–ª–∏—è"
	dat["a3"] = "–ò–º—è"
	dat["a4"] = "Other"
	dat["passp"] = "–ü–∞—Å–ø–æ—Ä—Ç"

	client.HMSet("mst:001", dat)

	// –ß—Ç–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
	// –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª—è —Ç–æ –∏—Ö –Ω–µ –±—É–¥–µ—Ç –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤—ã–≤–æ–¥–∞
	cle := client.HMGet("mst:001", "a1", "a3", "a4", "passp")

	fmt.Println("–ò–º—è –∫–æ–º–∞–Ω–¥—ã ", cle.Name())
	fmt.Println("–ó–Ω–∞—á–µ–Ω–∏—è –≤ –º–∞—Å—Å–∏–≤–µ ", cle.Val())
	fmt.Println("–ê—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –º–∞—Å—Å–∏–≤–µ ", cle.Args())
	fmt.Println("–ê—Ä–≥—É–º–µ–Ω—Ç—ã –≤ —Å–∏–º–≤–æ–ª—å–Ω—ã–π ", cle.String())

	res, _ := cle.Result()
	fmt.Println("–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –º–∞—Å—Å–∏–≤–µ ", res)

	// Loop results
	for _, rr := range res {
		fmt.Println("Result :", rr)
	}
}
```


## üìö HGET
```go
func HSETHGET() {

	// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –ø–æ –æ–¥–Ω–æ–º—É
	client.HSet("mst:001:01:ART", "system", 1)
	client.HSet("mst:001:01:ART", "other", "–ü—Ä–æ—á–∏–µ —Ñ–∏—Ç—á–∏")
	client.HSet("mst:001:01:ART", "prim", "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ")
	client.HSet("mst:001:01:ART", "settings", "–£—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ")

	ss := client.HGet("mst:001:01:ART", "system")
	fmt.Println(ss)

	ss = client.HGet("mst:001:01:ART", "other")
	fmt.Println(ss)

	ss = client.HGet("mst:001:01:ART", "prim")
	fmt.Println(ss)

	// –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å–º–ø–∏–∫–∞ –ø–æ –∫–ª—é—á—É
	client.HDel("mst:001:01:ART", "prim")

	// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏–µ –≤ —Å–ø–∏—Å–∫–µ –ø–æ –∫–ª—é—á—É
	ye := client.HExists("mst:001:01:ART", "prim")
	fmt.Println("Has prim ", ye)

	// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏–µ –≤ —Å–ø–∏—Å–∫–µ –ø–æ –∫–ª—é—á—É
	ye = client.HExists("mst:001:01:ART", "other")
	fmt.Println("Has other : ", ye)

	keys := client.HGetAll("mst:001:01:ART")
	fmt.Println("Vals    : ", keys.Val())
	fmt.Println("Key     : ", keys.Val()["other"])
	fmt.Println("Args    : ", keys.Args())
	fmt.Println("Strings : ", keys.String())

	res, _ := keys.Result()
	fmt.Println("Results : ", res)
	fmt.Println("Result : ", res["other"])

	// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–ø–∏—Å–∫–µ
	for i, rr := range keys.Val() {
		fmt.Printf("ELEM %s Name : %s \n", i, rr)
	}

	// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–ø–∏—Å–∫–µ
	for i, rr := range keys.Args() {
		fmt.Println("–ê–†–ì :", i, rr)
	}
}
```


## üéÅ JSON
```go

// Set Get json
func Set_Json() {

	// –•—Ä–∞–Ω–µ–Ω–∏–µ 10 —Å–µ–∫
	dur := time.Duration(time.Second * 10)

	c := Corp{
		Title: "Title",
		Name:  "Name company",
		Form:  "–§–æ—Ä–º–∞",
	}

	ff, _ := json.Marshal(c)

	// –ó–∞–ø–∏—Å—å –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
	err := client.Set("jss", ff, dur)
	if err != nil {
		fmt.Println(err)
	}

	// Read Json
	kl, _ := client.Get("jss").Bytes()
	json.Unmarshal(kl, &c)

	// Old variant
	// val, _ := client.Get("jss").Result()
	// json.Unmarshal([]byte(val), &c)

	fmt.Println(c)
	fmt.Println(c.Title)
	fmt.Println(c.Name)

}
```




## üî• DELETE
```go
// *************************************
// –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π
// *************************************
func Deleting() {
	n, _ := client.Del("key1", "key2", "key3").Result()
	fmt.Println(n)
}
```



## üéû PUBLISH - SUBSCRIBE
```go
// Pub Sub in chanel
func Pub_Sub() {

	fmt.Println("Start ... ")
	go Pub("mchanel")
	go Pub("mc1")

	go Subb("mchanel")
	Subb("mc1")
}

// Publish
func Pub(ch string) {
	fmt.Println("PUBLISH :", ch)
	c := 0

	for i := 0; i < 10; i++ {
		c = i
		err := client.Publish(ch, fmt.Sprintf("payload ID  %v", c)).Err()
		if err != nil {
			fmt.Println(err)
		}
		time.Sleep(time.Millisecond * 300)
	}
	time.Sleep(time.Millisecond * 1000)

	c++
	client.Publish(ch, fmt.Sprintf("–û–∫–æ–Ω—á–∞–Ω–∏–µ ID  %v", c)).Err()
	time.Sleep(time.Millisecond * 300)

	c++
	client.Publish(ch, fmt.Sprintf("–ü–µ—Ä–µ–¥–∞—á–∞ —Å–æ–±—ã—Ç–∏—è 2 ID  %v", c)).Err()
	time.Sleep(time.Millisecond * 300)
}

// Subscribe
func Subb(ch string) {
	fmt.Println("SUBSCRIBE :", ch)

	pubsub := client.Subscribe(ch)
	//defer pubsub.Close()
	//pubsub.Receive()

	c := pubsub.Channel()
	for msg := range c {
		fmt.Println(msg.Channel, msg.Payload)
	}
}
```

## üëì FIND IN FOR
```go

// Iterator
func Iterrator() {
	// Set_Json()
	// Set_value_loop()

	// https://redis.uptrace.dev/guide/get-all-keys.html#cluster-and-ring
	// kk:1, kk:2
	iter := client.Scan(0, "kk:*", 0).Iterator()

	for iter.Next() {
		fmt.Println("keys", iter.Val())
	}

	if err := iter.Err(); err != nil {
		panic(err)
	}

}
```



